<div class="container" id="grauerbereich">
  <div class="row">
    <!-- Liste, die automatisch ans Ende scrollt -->
    <ul id="messageList" #scrollMe [scrollTop]="scrollMe.scrollHeight" >
      <!-- Listeelement, die 端ber die ngFor-Schleife iteriert und die Message oder den Nickname ausgibt -->
      <li  *ngFor="let message of chatHistory"  > <!-- [class.ownMessage]="nnIsSimilar" -->
        <!-- ngIf pr端ft, ob Message vom Typ message ist-->
        <div *ngIf="message.type === 'message' || message.type === undefined" class="textareamessage" [class.owntextareamessage]="nnIsSimilar" >
          <!-- ngIf setzt zusammen: Nickname, Timestamp und Message -->
          <span *ngIf="message.nickname && message.showNickname" class="messagenickname">{{ message.nickname }}:</span> 
          <span class="timeStampMessage" *ngIf="message.timestamp.valueOf() > dateNow.setHours(0)" > heute, {{ message.timestamp.toLocaleTimeString() }} </span>
          <span class="timeStampMessage" *ngIf="message.timestamp.valueOf() < dateNow.setHours(0) && message.timestamp.valueOf() > (dateNow.setDate(-1) && dateNow.setHours(0)) " > gestern, {{ message.timestamp.toLocaleTimeString() }} </span>
          <span class="timeStampMessage" *ngIf="message.timestamp.valueOf() < (dateNow.setDate(-1) && dateNow.setHours(0)) " > {{ message.timestamp.toLocaleDateString() }}, {{ message.timestamp.toLocaleTimeString() }} </span>
          <br/>{{ message.message }}
        </div>

        <!-- ngIf pr端ft, ob Message vom Typ newUser ist (Infomeldung: "xy ist dem Chat beigetreten")-->
        <div *ngIf="message.type === 'newUser'" class="textareamessage newusermessage" [class.owntextareamessage]="nnIsSimilar" >
          <!-- nfIf setzt zusammen: Nickname und Timestamp -->
          <span *ngIf="message.nickname" class="messagenickname">{{ message.nickname }} {{ message.message }}</span> 
          <span class="timeStampNewUser" *ngIf="message.timestamp.valueOf() > dateNow.setHours(0)" > heute, {{ message.timestamp.toLocaleTimeString() }} </span>
          <span class="timeStampNewUser" *ngIf="message.timestamp.valueOf() < dateNow.setHours(0) && message.timestamp.valueOf() > (dateNow.setDate(-1) && dateNow.setHours(0)) " > gestern, {{ message.timestamp.toLocaleTimeString() }} </span>
          <span class="timeStampNewUser" *ngIf="message.timestamp.valueOf() < (dateNow.setDate(-1) && dateNow.setHours(0)) " > {{ message.timestamp.toLocaleDateString() }}, {{ message.timestamp.toLocaleTimeString() }} </span>
        </div>

        <!-- ngIf pr端ft, ob Message vom Typ newUser ist (Infomeldung: "xy ist dem Chat beigetreten")-->
        <div *ngIf="message.type === 'changeUser'" class="textareamessage newusermessage" [class.owntextareamessage]="nnIsSimilar" >
          <!-- nfIf setzt zusammen: Nickname und Timestamp -->
          <span *ngIf="message.nickname" class="messagenickname">{{ message.message }}</span> 
          <span class="timeStampNewUser" *ngIf="message.timestamp.valueOf() > dateNow.setHours(0)" > heute, {{ message.timestamp.toLocaleTimeString() }} </span>
          <span class="timeStampNewUser" *ngIf="message.timestamp.valueOf() < dateNow.setHours(0) && message.timestamp.valueOf() > (dateNow.setDate(-1) && dateNow.setHours(0)) " > gestern, {{ message.timestamp.toLocaleTimeString() }} </span>
          <span class="timeStampNewUser" *ngIf="message.timestamp.valueOf() < (dateNow.setDate(-1) && dateNow.setHours(0)) " > {{ message.timestamp.toLocaleDateString() }}, {{ message.timestamp.toLocaleTimeString() }} </span>
        </div>
      
      </li>
      
    </ul>

  </div>
</div>

<!-- [ngClass]="compareNickname() ? 'ownMessage' : 'message'" -->